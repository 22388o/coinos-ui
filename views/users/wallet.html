{{#yield-scripts}}
  <script src="/bower/bootstrap3-dialog/dist/js/bootstrap-dialog.min.js"></script>
  <script src="/bower/jquery-serialize-object/dist/jquery.serialize-object.min.js"></script>
  <script src="/bower/crypto-js/crypto-js.js"></script>
  <script src="/js/bip38.min.js"></script>
  <script src="/js/bip39.min.js"></script>
  <script src="/js/wallet.js"></script>
{{/yield-scripts}}

<div class="wallet" style="display: none">
  <h1>Wallet Balance</h1>

  <input type="hidden" id="username" name="username" value="{{user}}" />
  <input type="hidden" id="email" name="email" />

  <div id="keys_updated" class="alert alert-success" style="display: none">
    <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    Wallet keys updated
  </div>

  <div class="well">
    <b id="balance" class="lead">0</b> <b id="unit" class="lead"></b> 
    (<b id="fiat" class="lead">0 CAD</b>)

    <div class="pull-right">
      <button id="withdraw" type="button" class="btn btn-default" style="display: none" data-toggle="tooltip" data-placement="bottom" title="Withdraw">
        <i class="fa fa-btc fa-lg"></i>
      </button>
      <button id="manage" type="button" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" title="Manage Keys">
        <i class="fa fa-key fa-lg"></i>
      </button>
      <button id="backup" type="button" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" title="Download Backup">
        <i class="fa fa-download fa-lg"></i>
      </button>
    </div>
  </div>

  <div id="keys" style="display: none">
    <h3>Keys</h3>

    <form>
      <div class="form-group">
        <div class="input-group" style="width: 100%">
          <label for="new_password">Password:</label>
          <input id="new_password" name="new_password" type="password" class="form-control"  />
        </div>
      </div>

      <div class="form-group has-feedback">
        <div class="input-group" style="width: 100%">
          <label for="pubkey">
            Address or Key:
            <button id="types" type="button" class="btn btn-default" title="Supported Key Types" data-toggle="popover" data-placement="right">
              <i class="fa fa-question"></i>
            </button>
          </label>
          <textarea id="pubkey" name="pubkey" class="form-control" rows="3"></textarea>
        </div>
      </div>

      <div class="form-group" style="display: none">
        <div class="input-group" style="width: 100%">
          <label for="privkey">Key:</label>
          <textarea id="privkey" name="privkey" class="form-control" rows="3"></textarea>
        </div>
      </div>

      <div class="form-group has-feedback">
        <div class="input-group" style="width: 100%">
          <label for="type">Detected Type:</label>
          <select id="type" name="type" class="form-control" disabled>
            <option value="unknown">Unknown</option>
            <option value="address">Bitcoin Address (starts with 1 or 3)</option>
            <option value="private_key">Private Key (starts with 5 or L)</option>
            <option value="xpub">HD Wallet pubkey (starts with xpub)</option>
            <option value="xprv">HD Wallet private key (starts with xprv)</option>
            <option value="aes">AES Encrypted Private Key (starts with U)</option>
            <option value="bip38">BIP38 Encrypted Private Key (starts with 6)</option>
            <option value="bip39">BIP39 Mnemonic (series of 12-24 english words)</option>
          </select>
        </div>
      </div>
      <button id="generate" class="btn btn-primary pull-right" type="button"><i class="fa fa-bolt"></i> Generate New HD Wallet</button>
      <br class="clear" />

      <input class="btn btn-primary" type="button" value="Save" />
    </form>
  </div>

  <div id="withdrawal" style="display: none">
    <h3>Send Payment / Withdrawal</h3>

    <div id="transaction_sent" class="alert alert-success" style="display: none">
      <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <p>Transaction sent!</p><br />
      <button id="blockchain" class="btn btn-success">View on Blockchain</button>
    </div>

    <div id="invalid_keys" class="alert alert-danger" style="display: none">
      <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      Invalid password or problem with private key
    </div>

    <form>
      <div class="form-group has-feedback">
        <div class="input-group">
          <label for="amount">Amount:</label>
          <input type="number" id="amount" name="amount" class="form-control" min="0" required />
          <span class="input-group-btn">
            <button id="currency_toggle" type="button" class="btn btn-primary"></button>
          </span>
          <span class="input-group-btn">
            <button id="max" type="button" class="btn btn-primary">Max</button>
          </span>
        </div>
        <div class="help-block with-errors"></div>
      </div>

      <div class="form-group has-feedback">
        <div class="input-group" style="width: 100%">
          <label for="amount">To Address:</label>
          <input type="text" id="recipient" name="recipient" class="form-control" data-address="true" required />
        </div>
        <div class="help-block with-errors"></div>
      </div>  
      
      <div class="form-group has-feedback">
        <div class="input-group" style="width: 100%">
          <label for="priority">Fee Priority for Confirmation Time:</label>
          <select id="priority" name="priority" class="form-control" required>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </div>
      </div>

      <div class="form-group has-feedback">
        <div class="input-group" style="width: 100%">
          <label for="password">Password:</label>
          <input id="password" name="password" type="password" class="form-control" data-password="true" required  />
        </div>
        <div class="help-block with-errors"></div>
      </div>

      <input id="send" class="btn btn-primary" type="button" value="Calculate Fee and Confirm Transaction" />
    </form>
  </div>
</div>

<div class="dialog" style="display: none">
  <div style="margin-bottom: 10px">
    <label>Amount:</label> <span class="amount"></span><br />
    <label>Fee:</label> <span class="fee"></span><br />
    <label>To:</label> <span class="address"></span>
  </div>

</div>
